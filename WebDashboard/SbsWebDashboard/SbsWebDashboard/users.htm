<!DOCTYPE html />
<html>
<head>
    <title></title>
    <script type="text/javascript" src="./Scripts/jquery-1.5.1.min.js"></script>
    <script type="text/javascript" src="./Scripts/jquery-ui-1.8.13.custom.min.js"></script>
    <script type="text/javascript" src="./Scripts/jquery.tmpl.min.js"></script>
    <script type="text/javascript" src="./Scripts/effectsUtil.js"></script>
   
</head>
<body>
    <table id="alluserstable">
        <thead>
            <tr>
                <th>
                    Name
                </th>
                <th>
                    LogonName
                </th>
                <th>
                    AccessLevel
                </th>
            </tr>
        </thead>
        <tbody id="alluserstbody">
        </tbody>
    </table>
    <script id="userTemplate" type="text/x-jQuery-tmpl">
            <tr class="userrow">
            <td class="name">${Name}</td>
            </tr>
    </script>
    <script id="userDetailTemplate" type="text/x-jQuery-tmpl">
         <tr class="userrow">
            <td class="logonName">${LogonName}</td>
            <td class="accessLevel">${AccessLevel}</td>
            </tr>
    </script>
     <script type="text/javascript">
         init();

         function init() {
             renderAllUser();
             $('#alluserstable tbody').sortable().disableSelection();
         }
         var selectedItem = null;

         function renderAllUser() {

             var userList = [
            { "AccessLevel": "admin", "Email": "email",
                "LogonName": "logonshit", "Name": "shit"
            },
             { "AccessLevel": "standard user", "Email": "email",
                 "LogonName": "logonshit", "Name": "shit"
             }];


             //$allUsersTbody = $("#alluserstable");
             for (var i = 0; i < userList.length; i++) {
                 $user = $("#userTemplate").tmpl(userList[i]);

                 $user.appendTo("#alluserstbody");
             }
             $("#alluserstbody").delegate(".userrow", "click", function () {
                 if (selectedItem) {
                     /* Switch previously selected item back to the summaryTemplate */
                     selectedItem.tmpl = $("#userTemplate").template();

                     /* Update rendering of previous selected item */
                     selectedItem.update();
                 }

                 /* Make this the selected item  */
                 selectedItem = $.tmplItem(this);

                 /* Switch this template item to the detailTemplate */
                 selectedItem.tmpl = $("#userDetailTemplate").template();

                 /* Refresh rendering */
                 selectedItem.update();

             });
             //            getAllUsers(function (userList) {
             //                $allUsersTbody = $('#alluserstable tbody');
             //                for (var i = 0; i < userList.length; i++) {
             //                    $user = $('#userTemplate').tmpl(userList[i]);

             //                    $user.appendTo($allUsersTbody);
             //                }
             //            });

         }
    </script>
</body>
</html>
